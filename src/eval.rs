use crate::position::Position;
use crate::types::*;

#[rustfmt::skip]
pub const PSQT: [[i32; 64]; 15] = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ], [26718, 29210, 22080, 25876, 26512, 21141, 26715, 29763, 66162, 69152, 60572, 63500, 63342, 74964, 82719, 61413, 66074, 65381, 58556, 62142, 65883, 68734, 73925, 64307, 70812, 75164, 62970, 63477, 67658, 70119, 76045, 65689, 83038, 84535, 76455, 76180, 78969, 77112, 83845, 67121, 108256, 119883, 121712, 110698, 109552, 108923, 115469, 103648, 173170, 170701, 158304, 145108, 141844, 122494, 125341, 133110, 30067, 26977, 29039, 29656, 22731, 27128, 28616, 28981, ], [115159, 153706, 148022, 158503, 160105, 163225, 148642, 76445, 148303, 168633, 171830, 170477, 172303, 170481, 162843, 162885, 157917, 178394, 176239, 189140, 193126, 185174, 184740, 165133, 165899, 192339, 194880, 197140, 199225, 197454, 199805, 182664, 176509, 195509, 202675, 212549, 208066, 219116, 202866, 201375, 165631, 193066, 211974, 213775, 220947, 221255, 211671, 184225, 162039, 176916, 188518, 204298, 206806, 196218, 177789, 185622, 100840, 180477, 180946, 201042, 185179, 179512, 189499, 118699, ], [188042, 190241, 173434, 181790, 172657, 186015, 181522, 176476, 185378, 192709, 193369, 193657, 188872, 200016, 201542, 198177, 197871, 196853, 201074, 208637, 199888, 203032, 199833, 200410, 202258, 210535, 209767, 211781, 212235, 208245, 202057, 199722, 195432, 204044, 205683, 221440, 216240, 220567, 207636, 202238, 199850, 209650, 221175, 221054, 219817, 228292, 226797, 215681, 183054, 207197, 203975, 213174, 222123, 210097, 211767, 199089, 198898, 202470, 205520, 198496, 206047, 190691, 215454, 188375, ], [294126, 300589, 297922, 305177, 304718, 299453, 308162, 285402, 281855, 287243, 297881, 292113, 294872, 301836, 300986, 295418, 287153, 301046, 296394, 299987, 299826, 294209, 307540, 282573, 298245, 310185, 309754, 311358, 313927, 318211, 316815, 313489, 318099, 326821, 341048, 344190, 330248, 336545, 332252, 326174, 331900, 329586, 337540, 341299, 342307, 351851, 344115, 339980, 339955, 338839, 347867, 343224, 341124, 341393, 340971, 340806, 341001, 344039, 344512, 341724, 343651, 343793, 345801, 346323, ], [530574, 527046, 527651, 534212, 525421, 508102, 510099, 527801, 527630, 540007, 538438, 534389, 537982, 535084, 534297, 530156, 533970, 532594, 545704, 537994, 536611, 542715, 551827, 552614, 525475, 543440, 540221, 546164, 549669, 559137, 561686, 565855, 536927, 546203, 553574, 561344, 579743, 590883, 590775, 574238, 530474, 545999, 550565, 575825, 586050, 605191, 611311, 599718, 546804, 532517, 563311, 573495, 581974, 602192, 578657, 594363, 555900, 576707, 572637, 577630, 583151, 617966, 606519, 601622, ], [-31413, 6768, -11593, -35639, -31298, -24267, -7949, -7040, -182, 1924, -10264, -5870, -7977, -7849, -5456, -8149, -2925, 8433, 2104, 8807, 8929, 8630, -1435, -15801, -4789, 13348, 21586, 17664, 23415, 14962, 10016, -6804, 17742, 30029, 24991, 29691, 28557, 33878, 32046, 6530, 17829, 37170, 33870, 25669, 31651, 35814, 32889, 16748, 21565, 31269, 32219, 8842, 26074, 15696, 38439, -5840, -32076, 6184, 17753, 489, 5046, 28795, -11106, -10218, ], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ], [-22816, -23807, -22100, -25058, -22049, -24951, -25071, -25770, -172166, -173596, -164045, -141227, -145877, -137153, -139489, -139350, -103950, -119832, -120777, -119672, -110491, -101819, -115832, -94126, -81080, -87625, -76035, -76840, -80037, -86124, -82002, -71083, -68650, -76547, -65602, -66985, -71238, -66599, -73717, -65095, -64584, -70629, -58996, -62547, -68899, -67328, -76391, -66012, -63486, -67740, -63382, -64022, -58071, -77174, -83702, -64938, -29704, -21149, -29596, -22033, -25089, -26729, -23957, -28918, ], [-102258, -184303, -176917, -186353, -201939, -198232, -200389, -102983, -165372, -178987, -197286, -208150, -213366, -201860, -184224, -175828, -165976, -194387, -205759, -210059, -228530, -231472, -204566, -197858, -173408, -187206, -201401, -210111, -210699, -220761, -195322, -196212, -178372, -194375, -193697, -196338, -204266, -197931, -198987, -172254, -159609, -169797, -174115, -201889, -194920, -185555, -174832, -167708, -150712, -154933, -171383, -178608, -178906, -182022, -162734, -156897, -114777, -155315, -142241, -157194, -157503, -159141, -155786, -83461, ], [-185122, -193534, -211851, -194135, -208234, -189251, -215735, -210555, -183598, -213028, -206757, -214584, -211960, -211753, -201607, -209680, -200587, -210163, -216164, -214413, -218644, -218036, -224260, -213876, -193317, -214434, -215716, -226205, -223958, -217930, -210598, -216849, -195352, -209132, -212751, -215525, -214786, -211519, -215524, -210488, -189628, -202144, -206124, -208593, -199728, -198604, -202237, -201232, -189303, -192968, -195937, -190211, -195668, -194027, -198231, -200787, -191082, -189275, -178962, -183530, -182186, -184441, -189255, -195178, ], [-334515, -340169, -345413, -343359, -336442, -339925, -342612, -346015, -332345, -334533, -346479, -344426, -351464, -342523, -336567, -337478, -333827, -332792, -339629, -340485, -340268, -346477, -338358, -340770, -321677, -324081, -326122, -327319, -335242, -336279, -329348, -329250, -306174, -313239, -313667, -316821, -305677, -307230, -313150, -304596, -293073, -301567, -302745, -301580, -311181, -289974, -303427, -300628, -270942, -280634, -294564, -293775, -289918, -292405, -300477, -285725, -293781, -297410, -304836, -306792, -302905, -300367, -303731, -285773, ], [-557890, -573392, -575766, -584098, -594380, -590987, -594705, -602041, -547409, -539827, -560746, -588817, -593410, -601850, -563214, -596353, -542116, -542454, -554208, -563094, -573301, -608679, -609016, -575896, -538391, -541787, -545212, -557880, -581857, -572598, -579985, -568476, -531778, -545531, -547721, -559219, -554184, -559716, -553366, -563907, -525722, -533804, -553214, -539980, -534911, -536965, -548966, -542853, -531116, -539576, -535635, -541361, -537289, -538418, -525550, -533219, -538602, -533162, -524824, -533126, -528096, -513131, -519056, -509198, ], [47304, -22762, -2357, -18814, 26077, 17663, 6209, 50968, -16426, -33250, -10505, 7727, -2135, -15554, -31904, 3714, -34218, -40410, -27807, -23944, -11681, -32281, -43194, -23291, -16693, -31164, -36725, -17600, -30234, -24783, -17152, -6557, 10252, -18503, -23948, -17153, -18450, -16119, -18099, 7566, 11367, -960, -3920, -8094, -8730, -4548, 1109, 14286, 4017, 259, 7988, 13186, 13066, 3814, 4062, 5151, 22807, -9438, 3009, 27002, 33119, 24701, 9599, 14631, ], ];
pub const TEMPO_BONUS: i32 = 3775;
pub const BIAS: i32 = 1120;
pub const DIV: i32 = 512;
//Params scaled by 2**17 => Evaluation scaled by 2**17/2**9 = 2**8 = 256

pub fn eval(pos: &Position) -> i32 {
    let mut eval = pos.piece_eval + BIAS;
    eval = if pos.ctm == WHITE { eval } else { -eval } + TEMPO_BONUS;
    eval / DIV
}
