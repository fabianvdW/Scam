use crate::position::Position;
use crate::types::*;

#[rustfmt::skip]
pub const PSQT: [[i32; 64]; 15] = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ], [131072, -2316, 4697, 1333, -1800, -3454, -1703, 4083, 56653, 63339, 43026, 43018, 37669, 68714, 70529, 52635, 62391, 68110, 53723, 51534, 49240, 52366, 70018, 56562, 60459, 68835, 63360, 59482, 58849, 56023, 69428, 58350, 72176, 78025, 69904, 60577, 79031, 68556, 73756, 57702, 102532, 92455, 103612, 102237, 104098, 114306, 99662, 74730, 156280, 152879, 150828, 129803, 126369, 111594, 101587, 121752, 3199, -3051, 248, -3550, 2885, 4055, -4203, -3251, ], [49143, 41351, 25860, 29154, 31465, 30271, 44988, -5751, 27863, 46450, 51263, 64453, 68495, 57200, 48129, 39612, 39939, 65551, 71720, 78986, 83766, 71418, 82024, 54743, 56343, 70574, 87789, 88731, 96938, 87280, 88891, 57807, 65471, 84131, 100416, 101397, 104412, 121508, 90066, 105786, 79456, 86571, 104962, 116508, 115989, 112143, 110670, 81639, 70259, 82497, 97947, 103898, 107904, 97002, 86428, 51595, 53814, 85663, 87401, 77164, 92174, 78651, 74154, 32959, ], [76574, 92762, 71104, 64168, 61958, 77487, 78281, 74231, 90761, 94335, 94529, 89539, 87859, 83364, 98791, 95125, 90587, 110772, 99356, 101080, 94118, 97997, 106111, 92505, 101576, 97071, 109590, 111262, 113583, 106232, 98776, 97981, 92172, 112155, 105299, 124661, 116068, 127574, 106042, 100056, 92009, 114119, 112968, 129943, 117457, 123402, 121182, 117792, 94692, 103468, 121880, 118382, 107504, 116291, 100161, 96494, 93685, 117532, 101033, 106653, 101738, 87658, 111282, 115997, ], [153683, 162772, 165374, 164820, 168822, 160108, 156209, 147809, 134014, 145697, 151734, 152425, 152193, 160968, 152716, 147077, 141509, 152141, 147160, 156458, 154046, 149430, 161735, 148700, 160588, 174056, 169049, 168027, 173338, 170406, 181097, 160225, 181423, 181183, 194727, 196724, 192239, 188446, 184673, 179400, 198157, 192668, 204684, 208744, 207500, 205129, 191185, 184444, 203180, 196412, 198154, 198307, 207505, 197688, 194396, 195952, 199226, 187907, 197259, 201681, 199013, 199934, 197770, 196829, ], [243579, 236611, 235634, 242393, 243992, 217016, 232130, 216032, 237022, 237972, 246960, 240279, 242472, 244812, 239087, 235063, 234830, 251862, 250513, 246295, 246599, 241621, 257179, 236572, 240872, 246587, 258682, 266015, 256654, 264932, 254446, 250380, 246008, 252390, 260385, 271341, 276865, 281067, 277010, 274244, 235391, 249003, 264502, 274149, 283525, 307560, 304898, 295781, 241608, 248639, 271834, 293603, 277487, 282630, 293148, 302998, 259052, 269936, 275082, 277536, 292190, 296875, 298082, 289006, ], [-6458, 18348, -3899, -36800, -31311, -21298, -8488, -4349, 2368, 2601, -15158, 53, -4905, -8151, 490, -3677, -11531, -1173, 5134, 8300, 6734, 4840, 403, -5632, -14943, 8582, 4517, 17031, 16861, 3995, 12970, -14825, 6797, 20748, 26827, 8103, 16073, 20729, 18335, 1257, 21851, 28171, 22540, 10836, 8668, 25715, 30548, 5734, -727, 29359, 32531, 39792, 20927, 33357, 28148, 10866, -16548, 14638, 7119, 26686, 27752, 3307, 10668, 10450, ], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ], [-3938, -259, -2212, -420, 594, -3396, 3896, 4459, -150628, -144010, -144457, -123589, -127099, -118201, -120699, -114545, -93748, -102970, -106267, -107766, -105944, -93271, -95176, -84571, -76155, -78688, -81436, -65847, -72075, -66349, -72006, -64609, -65871, -72891, -64964, -62197, -61323, -56061, -66168, -58645, -62609, -60995, -60461, -51667, -55473, -60312, -70694, -60453, -61371, -61588, -51732, -41185, -41266, -67971, -72770, -56467, -291, 655, 570, 1141, -4040, 3565, 933, 3967, ], [-53790, -50150, -97267, -93935, -103035, -83594, -81458, -26899, -60669, -80790, -103592, -100335, -110009, -113872, -101634, -72977, -69682, -85869, -114667, -115527, -124615, -128225, -101475, -79737, -80969, -84174, -110791, -110369, -105823, -120157, -101316, -87160, -62816, -68379, -94691, -80393, -91554, -86618, -86784, -74861, -48913, -62867, -69054, -77900, -80063, -75605, -61474, -44658, -28978, -27051, -53243, -58843, -62734, -52382, -54986, -40698, -24020, -44684, -9993, -29969, -46507, -23779, -47111, -5756, ], [-88711, -114435, -111279, -110062, -114677, -76608, -112204, -105844, -83701, -114444, -121299, -111465, -106441, -108726, -94816, -106962, -84582, -117190, -113691, -118621, -124881, -122440, -130033, -111107, -92124, -102870, -111711, -122888, -129465, -122947, -102455, -107987, -94095, -100746, -103679, -112013, -116323, -105271, -100117, -91852, -88535, -93145, -106620, -104467, -106529, -104374, -96560, -88111, -92274, -96857, -99525, -81498, -93591, -93990, -105728, -78666, -78334, -84538, -77792, -73697, -65402, -73544, -64969, -76755, ], [-201076, -199407, -193477, -203193, -205105, -195898, -200948, -209869, -198468, -198448, -201770, -211328, -211440, -196002, -197346, -194652, -197663, -198713, -193524, -200972, -209542, -210070, -202823, -193578, -177900, -185441, -193100, -206993, -191704, -198733, -184485, -187432, -155642, -173716, -172101, -165968, -168833, -161493, -176761, -156175, -140497, -153689, -153579, -153194, -155657, -148084, -172696, -153785, -136826, -140860, -148558, -150520, -147884, -153261, -154790, -139184, -152205, -158241, -161723, -165440, -162697, -157136, -146538, -143789, ], [-275047, -281113, -294329, -293036, -292453, -293790, -301000, -289101, -237925, -244065, -265446, -286441, -289283, -286293, -283353, -306872, -245568, -250539, -249776, -276687, -288180, -307142, -297027, -276847, -238574, -248825, -272723, -266784, -279809, -286614, -272499, -265514, -241635, -243478, -252002, -254558, -257935, -256031, -264389, -256697, -241149, -241113, -252121, -239783, -244896, -244239, -260642, -230972, -232502, -236739, -244322, -234339, -237572, -232930, -236711, -207683, -252735, -225381, -226644, -237631, -225128, -194182, -197075, -204681, ], [4487, -4731, -30435, -34641, -17553, -45125, -15535, -9562, -16781, -36444, -26769, -38013, -30122, -26585, -40395, -25816, -20307, -31473, -24024, -14474, -7996, -33952, -33143, -15109, -22605, -23771, -34422, -23099, -22923, -26013, -29392, -7610, 13166, -6451, -20229, -18963, -22930, -9532, -13637, 5763, 21654, 6310, -11400, -11287, -6733, -5462, 3358, 14181, 12048, 6401, 10308, 10171, 4612, 8738, 3175, 5517, 17924, -9316, 542, 39543, 30904, 26461, 5459, 9436, ], ];
pub const TEMPO_BONUS: i32 = 19813;
pub const BIAS: i32 = 179;
//Params scaled by 2**17 => Evaluation scaled by 2**17/2**9 = 2**8 = 256
pub const DIV: i32 = 512;

pub fn eval(pos: &Position) -> i32 {
    let mut eval = pos.piece_eval + BIAS;
    eval = if pos.ctm == WHITE { eval } else { -eval } + TEMPO_BONUS;
    eval / DIV
}
